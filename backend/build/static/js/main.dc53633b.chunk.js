(this["webpackJsonptodo-redux"]=this["webpackJsonptodo-redux"]||[]).push([[0],{30:function(e,t,n){},43:function(e,t,n){e.exports=n(81)},52:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},81:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(22),c=n.n(o),i=n(3),u=n(16),l=n(6),s=n(7),m=n(12),d=n(11),p=n(13),f=n(19),E=(n(52),n(4)),h=a.a.createContext(),b=h.Provider,g=h.Consumer,v=function(){return function(e){return function(t){return a.a.createElement(g,null,(function(n){return a.a.createElement(e,Object.assign({},t,{todoService:n}))}))}}},y=function(e){return function(){return function(t){t({type:"FETCH_LIST_REQUEST"}),e.getTodoList().then((function(e){return t({type:"FETCH_LIST_SUCCESS",payload:e.data})})).then((function(){return t(O())})).catch((function(e){return t(function(e){return{type:"FETCH_LIST_FAILURE",payload:e}}(e))}))}}},O=function(){return{type:"UPDATE_DONE_COUNT"}},_=function(e){return function(){return function(t){e.userLogout().then((function(e){return t(function(e){return{type:"SEND_USER_LOGOUT_SUCCESS",payload:e}}(e))})).catch((function(e){return console.log(e)}))}}},S=(n(30),function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(a)))).state={emailVal:"",password1:"",redirect:!1},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.sendLoginForm,r=t.homeRedirect,o=t.errorLogin,c=this.state,i=c.emailVal,l=c.password;return r?a.a.createElement(f.a,{to:"/"}):a.a.createElement("div",{className:"todo-app text-center"},a.a.createElement("nav",{className:"nav nav-pills nav-fill"},a.a.createElement(u.b,{to:"/login",className:"nav-item nav-link active"},"Login"),a.a.createElement(u.b,{to:"/register",className:"nav-item nav-link"},"Registration")),a.a.createElement("form",{id:"loginForm"},a.a.createElement("div",{className:"form-group"},a.a.createElement("label",{htmlFor:"loginEmail"},"Email address"),a.a.createElement("input",{type:"email",className:"form-control",id:"loginEmail","aria-describedby":"emailHelp",onChange:function(t){e.setState({emailVal:t.target.value})}})),a.a.createElement("div",{className:"form-group"},a.a.createElement("label",{htmlFor:"loginPassword"},"Password"),a.a.createElement("input",{type:"password",className:"form-control",id:"loginPassword",onChange:function(t){e.setState({password:t.target.value})}})),a.a.createElement("p",null,o),a.a.createElement("button",{type:"submit",className:"btn btn-secondary float-right",onClick:function(e){e.preventDefault(),i&&l&&n({email:i,password:l})}},"Submit")))}}]),t}(a.a.Component)),I=v()(Object(i.b)((function(e){return{homeRedirect:e.homeRedirect,errorLogin:e.errorLogin}}),(function(e,t){var n=t.todoService;return Object(E.b)({sendLoginForm:function(t){return e(function(e,t){return function(){return function(n){e.sendLoginForm(t).then((function(e){return n(function(e){return{type:"SEND_LOGIN_FORM_SUCCESS",payload:e}}(e))})).catch((function(e){return n(function(e){return{type:"SEND_LOGIN_FORM_FAILURE",payload:e}}(e))}))}}}(n,t))}},e)}))(S)),L=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(a)))).state={emailVal:"",password1:"",password2:"",redirect:!1},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.sendRegisterForm,r=t.homeRedirect,o=t.errorRegister,c=this.state,i=c.emailVal,l=c.password1,s=c.password2;return r?a.a.createElement(f.a,{to:"/"}):a.a.createElement("div",{className:"todo-app text-center"},a.a.createElement("nav",{className:"nav nav-pills nav-fill"},a.a.createElement(u.b,{to:"/login",className:"nav-item nav-link"},"Login"),a.a.createElement(u.b,{to:"/register",className:"nav-item nav-link  active"},"Registration")),a.a.createElement("form",{id:"registerForm"},a.a.createElement("div",{className:"form-group"},a.a.createElement("label",{htmlFor:"registerEmail"},"Email address"),a.a.createElement("input",{type:"email",className:"form-control",id:"registerEmail","aria-describedby":"emailHelp",value:i,onChange:function(t){e.setState({emailVal:t.target.value})}}),a.a.createElement("small",{id:"emailHelp",className:"form-text text-muted"},"We'll never share your email with anyone else.")),a.a.createElement("div",{className:"form-group"},a.a.createElement("label",{htmlFor:"registerPassword1"},"Password"),a.a.createElement("input",{type:"password",className:"form-control",id:"registerPassword1",value:l,onChange:function(t){e.setState({password1:t.target.value})}})),a.a.createElement("div",{className:"form-group"},a.a.createElement("label",{htmlFor:"registerPassword2"},"Password"),a.a.createElement("input",{type:"password",className:"form-control",id:"registerPassword2",value:s,onChange:function(t){e.setState({password2:t.target.value})}})),a.a.createElement("p",null,o),a.a.createElement("button",{type:"submit",className:"btn btn-secondary float-right",onClick:function(t){t.preventDefault(),i&&l&&l===s&&(n({email:i,password:l}),e.setState({redirect:!0}))}},"Submit")))}}]),t}(a.a.Component),R=v()(Object(i.b)((function(e){return{homeRedirect:e.homeRedirect,errorRegister:e.errorRegister}}),(function(e,t){var n=t.todoService;return Object(E.b)({sendRegisterForm:function(t){return e(function(e,t){return function(){return function(n){e.sendRegisterForm(t).then((function(e){return n(function(e){return{type:"SEND_REGISTER_FORM_SUCCESS",payload:e}}(e.data))})).catch((function(e){return n(function(e){return{type:"SEND_REGISTER_FORM_FAILURE",payload:e}}(e))}))}}}(n,t))}},e)}))(L)),T=v()(Object(i.b)(null,(function(e,t){var n=t.todoService;return Object(E.b)({userLogout:_(n)},e)}))((function(e){var t=e.userLogout;return a.a.createElement("div",{className:"app-logout d-flex"},a.a.createElement("button",{className:"btn btn-outline-warning",onClick:t},"Logout"))}))),N=(n(54),Object(i.b)((function(e){return{todo:e.active,done:e.doneCount}}))((function(e){var t=e.todo,n=e.done;return a.a.createElement("div",{className:"app-header d-flex"},a.a.createElement("h1",null,"Todo List"),a.a.createElement("h2",null,t," more to do, ",n," done"))}))),C=(n(55),n(56),function(e){var t=e.label,n=e.id,r=e.done,o=e.important,c=e.onDoneItem,i=e.onImportantItem,u=e.onRemoveFromList,l="list-group-item todo-list-item d-flex";return r&&(l="list-group-item todo-list-item d-flex done"),o&&(l="list-group-item todo-list-item d-flex important"),r&&o&&(l="list-group-item todo-list-item done d-flex important"),a.a.createElement("li",{className:l,id:n},a.a.createElement("span",{className:"todo-list-item-label",onClick:c},t),a.a.createElement("button",{type:"button",className:"btn btn-outline-success btn-sm ",onClick:i},a.a.createElement("i",{className:"fa fa-exclamation"})),a.a.createElement("button",{type:"button",className:"btn btn-outline-danger btn-sm ",onClick:u},a.a.createElement("i",{className:"fa fa-trash-o"})))}),j=(n(57),function(){return a.a.createElement("h2",null,"Error")}),F=(n(58),function(){return a.a.createElement("h2",null,"Loading...")}),A=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(a)))).state={hasError:!1},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidCatch",value:function(){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?a.a.createElement(j,null):this.props.children}}]),t}(r.Component),w=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchList()}},{key:"render",value:function(){var e=this.props,t=e.loading,n=e.list,r=e.error,o=e.isAuth,c=e.onDoneItem,i=e.onImportantItem,u=e.onRemoveFromList;return t?a.a.createElement(F,null):r?a.a.createElement(j,null):o?a.a.createElement(A,null,a.a.createElement("ul",{className:"list-group todo-list"},n.map((function(e){return a.a.createElement(C,{label:e.label,key:e.id,done:e.done,important:e.important,onDoneItem:function(){return c(e.id)},onImportantItem:function(){return i(e.id)},onRemoveFromList:function(){return u({id:e.id})}})})))):a.a.createElement(f.a,{to:"/login"})}}]),t}(a.a.Component),D=v()(Object(i.b)((function(e){return{loading:e.loading,list:e.list,error:e.error,isAuth:e.isAuth}}),(function(e,t){var n=t.todoService;return Object(E.b)({fetchList:y(n),onImportantItem:function(t){return e(function(e,t){return function(){return function(n){e.updateItem({id:t,important:!0}).then((function(e){return n(function(e){return{type:"UPDATE_IMPORTANT_ITEM",payload:e}}(e.data.id))})).catch((function(e){return n(function(e){return{type:" IMPORTANT_FAILURE",payload:e}}(e))}))}}}(n,t))},onDoneItem:function(t){return e(function(e,t){return function(){return function(n){e.updateItem({id:t,done:!0}).then((function(e){return n(function(e){return{type:"UPDATE_DONE_ITEM",payload:e}}(e.data.id))})).then((function(){return n(O())})).catch((function(e){return n(function(e){return{type:" DONE_FAILURE",payload:e}}(e))}))}}}(n,t))},onRemoveFromList:function(t){return e(function(e,t){return function(){return function(n){e.deleteItem(t).then((function(e){return n(function(e){return{type:"ITEM_REMUVE_FROM_LIST",payload:e}}(e.data.id))})).catch((function(e){return console.log(e),n(function(e){return{type:"DELETE_FAILURE",payload:e}}(e))}))}}}(n,t))}},e)}))(w)),U=(n(59),{onSearch:function(e){return{type:"SEARCH_ITEM_IN_LIST",payload:e}}}),x=Object(i.b)((function(){return{}}),U)((function(e){var t=e.onSearch;return a.a.createElement("input",{type:"text",className:"form-control search-input",placeholder:"type to search",onChange:function(e){return t(e.target.value)}})})),k=(n(60),{onFilterAll:function(){return{type:"FILTER_LIST_UPDATE"}},onFilterActive:function(){return{type:"FILTER_LIST_ACTIVE"}},onFilterDone:function(){return{type:"FILTER_LIST_DONE"}}}),M=Object(i.b)((function(){return{}}),k)((function(e){var t=e.onFilterActive,n=e.onFilterAll,r=e.onFilterDone;return a.a.createElement("div",{className:"btn-group"},a.a.createElement("button",{onClick:n,className:"btn btn-info"},"All"),a.a.createElement("button",{onClick:t,className:"btn btn-outline-secondary"},"Active"),a.a.createElement("button",{onClick:r,className:"btn btn-outline-secondary"},"Done"))})),P=(n(61),function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(a)))).state={str:""},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.onItemAddToList;return a.a.createElement("form",{className:"item-add-form d-flex"},a.a.createElement("input",{className:"form-control",type:"text",placeholder:"What next?",value:this.state.str,onChange:function(t){e.setState({str:t.target.value})}}),a.a.createElement("button",{type:"submit",className:"btn btn-outline-secondary",onClick:function(n){n.preventDefault(),e.state.str&&(t({str:e.state.str}),e.setState({str:""}))}},"Add"))}}]),t}(a.a.Component)),H=v()(Object(i.b)((function(){return{}}),(function(e,t){var n=t.todoService;return Object(E.b)({onItemAddToList:function(t){return e(function(e,t){return function(){return function(n){e.addItem(t).then((function(e){return n(function(e){return{type:"ITEM_ADD_SUCCESS",payload:e}}(e.data.todo))})).then((function(){return n(O())})).catch((function(e){return n(function(e){return{type:"ITEM_ADD_FAILURE",payload:e}}(e))}))}}}(n,t))}},e)}))(P)),G=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return a.a.createElement(f.d,null,a.a.createElement(f.b,{path:"/",render:function(){return a.a.createElement("div",{className:"todo-app"},a.a.createElement(T,null),a.a.createElement(N,null),a.a.createElement("div",{className:"top-panel d-flex"},a.a.createElement(x,null),a.a.createElement(M,null)),a.a.createElement(D,null),a.a.createElement(H,null))},exact:!0}),a.a.createElement(f.b,{path:"/login",component:I,exact:!0}),a.a.createElement(f.b,{path:"/register",component:R,exact:!0}))}}]),t}(r.Component),V=n(5),B=n.n(V),J=n(20),Q=n.n(J),W=function(){function e(){var t=this;Object(l.a)(this,e),this.data=[{id:1,label:"drink coffee",important:!1,done:!1},{id:2,label:"make avesome react app",important:!0,done:!1},{id:3,label:'to byu book "release it!"',important:!1,done:!0}],this._apiBase="http://localhost:8888/",this.getTodoList=function(){return B.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.a.awrap(Q.a.patch(t._apiBase));case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",e.t0);case 9:case"end":return e.stop()}}),null,null,[[0,6]])},this.sendLoginForm=function(e){return B.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,B.a.awrap(Q.a.post("".concat(t._apiBase,"login"),e));case 3:return n.abrupt("return",n.sent);case 6:return n.prev=6,n.t0=n.catch(0),console.log(n.t0),n.abrupt("return",n.t0);case 10:case"end":return n.stop()}}),null,null,[[0,6]])},this.sendRegisterForm=function(e){return B.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,B.a.awrap(Q.a.post("".concat(t._apiBase,"register"),e));case 3:return n.abrupt("return",n.sent);case 6:return n.prev=6,n.t0=n.catch(0),console.log("register error "+n.t0),n.abrupt("return",n.t0);case 10:case"end":return n.stop()}}),null,null,[[0,6]])},this.updateItem=function(e){return B.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,B.a.awrap(Q.a.put("".concat(t._apiBase),e));case 3:return n.abrupt("return",n.sent);case 6:n.prev=6,n.t0=n.catch(0),console.log("update error "+n.t0);case 9:case"end":return n.stop()}}),null,null,[[0,6]])},this.deleteItem=function(e){return B.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,B.a.awrap(Q.a.delete("".concat(t._apiBase),{params:e}));case 3:return n.abrupt("return",n.sent);case 6:n.prev=6,n.t0=n.catch(0),console.log("delete error "+n.t0);case 9:case"end":return n.stop()}}),null,null,[[0,6]])},this.addItem=function(e){return B.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,B.a.awrap(Q.a.post("".concat(t._apiBase),e));case 3:return n.abrupt("return",n.sent);case 6:n.prev=6,n.t0=n.catch(0),console.log("add error "+n.t0);case 9:case"end":return n.stop()}}),null,null,[[0,6]])},this.userLogout=function(){return B.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.a.awrap(Q.a.patch("".concat(t._apiBase,"logout")));case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),console.log("logout "+e.t0);case 9:case"end":return e.stop()}}),null,null,[[0,6]])}}return Object(s.a)(e,[{key:"getList",value:function(){var e=this;return new Promise((function(t){setTimeout((function(){t(e.data)}),500)}))}},{key:"_getCookie",value:function(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([.$?*|{}()\\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}}]),e}(),$=n(41),q=n(42),z=n(2),K=function(e,t){var n=0,r=1;return t.list.filter((function(t){return t.id===e}))[0].done&&(n=1,r=0),Object(z.a)({},t,{list:t.list.filter((function(t){return t.id!==e})),active:t.list.length-t.doneCount-r,doneCount:t.list.filter((function(e){return e.done})).length-n,generalList:t.list.filter((function(t){return t.id!==e}))})},X=function(e,t){var n=[].concat(Object(q.a)(t.list),[Object(z.a)({},e,{id:e._id})]);return Object(z.a)({},t,{list:n,active:t.list.length,generalList:n})},Y=function(e,t){return Object(z.a)({},t,{list:t.list.map((function(t){return t.id===e?Object(z.a)({},t,{important:!t.important}):t}))})},Z=function(e,t){var n=1;t.list.filter((function(t){return t.id===e}))[0].done&&(n=-1);var r=t.list.map((function(t){return t.id===e?Object(z.a)({},t,{done:!t.done}):t}));return Object(z.a)({},t,{list:r,generalList:r,active:t.list.length-t.doneCount-n,doneCount:t.list.filter((function(e){return e.done})).length+n})},ee=function(e){return Object(z.a)({},e,{doneCount:e.list.filter((function(e){return e.done})).length,active:e.list.length-e.list.filter((function(e){return e.done})).length})},te=function(e,t){return t.list=t.generalList,Object(z.a)({},t,{list:t.list.filter((function(t){return t.label.toLowerCase().includes(e.toLowerCase())}))})},ne=function(e){return e.list=e.generalList,Object(z.a)({},e,{list:e.list.filter((function(e){return e.done}))})},re=function(e){return Object(z.a)({},e,{list:e.generalList})},ae=function(e){return e.list=e.generalList,Object(z.a)({},e,{list:e.list.filter((function(e){return!e.done}))})},oe=function(e,t){return Object(z.a)({},t,{homeRedirect:e.data.homeRedirect||!1,isAuth:e.data.isAuth||!1,errorLogin:e.data.message||null})},ce={list:[],doneCount:0,loading:!0,error:null,active:0,generalList:[],homeRedirect:!1,isAuth:!0,errorLogin:null,errorRegister:null},ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(console.log(t.type),t.type){case"FETCH_LIST_REQUEST":return Object(z.a)({},e,{list:[],loading:!0,error:null,generalList:[],isAuth:!0});case"FETCH_LIST_SUCCESS":return Object(z.a)({},e,{list:t.payload.todos||[],loading:!1,error:null,generalList:t.payload.todos,isAuth:t.payload.isAuth,homeRedirect:!1});case"FETCH_LIST_FAILURE":return Object(z.a)({},e,{list:[],loading:!1,error:t.payload});case"ITEM_ADD_SUCCESS":return X(t.payload,e);case"ITEM_REMUVE_FROM_LIST":return K(t.payload,e);case"UPDATE_IMPORTANT_ITEM":return Y(t.payload,e);case"UPDATE_DONE_ITEM":return Z(t.payload,e);case"UPDATE_DONE_COUNT":return ee(e);case"SEARCH_ITEM_IN_LIST":return te(t.payload,e);case"FILTER_LIST_UPDATE":return re(e);case"FILTER_LIST_ACTIVE":return ae(e);case"FILTER_LIST_DONE":return ne(e);case"SEND_LOGIN_FORM_SUCCESS":return oe(t.payload,e);case"SEND_LOGIN_FORM_FAILURE":return Object(z.a)({},e,{errorLogin:"ERR_INTERNET_DISCONNECTED"});case"SEND_REGISTER_FORM_SUCCESS":return Object(z.a)({},e,{homeRedirect:t.payload.homeRedirect});case"SEND_REGISTER_FORM_FAILURE":return Object(z.a)({},e,{errorRegister:"ERR_INTERNET_DISCONNECTED"});case"SEND_USER_LOGOUT_SUCCESS":return Object(z.a)({},e,{isAuth:t.payload.isAuth,errorLogin:null,errorRegister:null});default:return e}},ue=Object(E.c)(ie,Object(E.a)($.a)),le=new W;c.a.render(a.a.createElement(i.a,{store:ue},a.a.createElement(A,null,a.a.createElement(b,{value:le},a.a.createElement(u.a,null,a.a.createElement(G,null))))),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.dc53633b.chunk.js.map